<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
</head>

<body>



<div id="carousel-1" class="carousel"></div>
<div id="carousel-2" class="carousel"></div>
<div id="carousel-3" class="carousel"></div>


<script>

  let images = [
    'https://js.cx/carousel/1.png',
    'https://js.cx/carousel/2.png',
    'https://js.cx/carousel/3.png',
    'https://js.cx/carousel/4.png',
    'https://js.cx/carousel/5.png',
    'https://js.cx/carousel/6.png',
    'https://js.cx/carousel/7.png',
    'https://js.cx/carousel/8.png',
    'https://js.cx/carousel/9.png',
    'https://js.cx/carousel/10.png'
  ];

  class Carousel {
    constructor(element, images) {
      this._el = element;
      this._images = images;

      this._render();
    }

    _renderAsHtml() {
      var imagesHtml = '';

      this._images.forEach(function(imageUrl) {
        imagesHtml += `<li><img src="${imageUrl}"></li>`
      });

      this._el.innerHTML = `
        <button class="arrow prev">⇦</button>
        <div class="gallery">
          <ul class="images">
            ${imagesHtml}
          </ul>
        </div>
        <button class="arrow next">⇨</button>
      `
    }

    _render() {
      let gallery = document.createElement('div');
      let prevButton = document.createElement('button');
      let nextButton = document.createElement('button');
      let imageList = document.createElement('ul');

      gallery.className = 'gallery';

      prevButton.className = 'arrow prev';
      prevButton.textContent = '⇦';

      nextButton.className = 'arrow next';
      nextButton.textContent = '⇨';

      imageList.className = 'images';

      this._images.forEach(function(imageLink) {
        let item = document.createElement('li');
        let image = new Image();

        image.src = imageLink;

        item.appendChild(image);
        imageList.appendChild(item);
      });

      gallery.appendChild(imageList);

      this._el.appendChild(prevButton);
      this._el.appendChild(gallery);
      this._el.appendChild(nextButton);
    }
  }

  new Carousel(document.getElementById('carousel-1'), images);
  new Carousel(document.getElementById('carousel-2'), images);
  new Carousel(document.getElementById('carousel-3'), images);

  /* конфигурация */
  var width = 130; // ширина изображения
  var count = 3; // количество изображений

  var carousel = document.getElementById('carousel');
  var list = carousel.querySelector('ul');
  var listElems = carousel.querySelectorAll('li');

  var position = 0; // текущий сдвиг влево

  carousel.querySelector('.prev').onclick = function() {
    // сдвиг влево
    // последнее передвижение влево может быть не на 3, а на 2 или 1 элемент
    position = Math.min(position + width * count, 0)
    list.style.marginLeft = position + 'px';
  };

  carousel.querySelector('.next').onclick = function() {
    // сдвиг вправо
    // последнее передвижение вправо может быть не на 3, а на 2 или 1 элемент
    position = Math.max(position - width * count, -width * (listElems.length - count));
    list.style.marginLeft = position + 'px';
  };



</script>
</body>

</html>